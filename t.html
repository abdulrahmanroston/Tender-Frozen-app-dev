<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    

    <script>
const consumer_key = 'ck_2e5a65a82af6bcc2ba23c93c79ee848326a31f76';
const consumer_secret = 'cs_07562a6ad0926374f19bf2f6e9484205bf67ec08';
const storeUrl = 'https://darkviolet-antelope-523488.hostingersite.com';

// الإيميل الذي نبحث عنه
const customerEmail = "learning.save@gmail.com";

// تحويل الـ keys إلى Base64
const token = btoa(`${consumer_key}:${consumer_secret}`);

// URL لجلب الطلبات
const endpoint = `${storeUrl}/wp-json/wc/v3/orders?per_page=100`;

fetch(endpoint, {
    method: 'GET',
    headers: {
        'Authorization': `Basic ${token}`,
        'Content-Type': 'application/json'
    }
})
.then(response => response.json())
.then(data => {
    console.log("=== ALL ORDERS ===", data);

    // فلترة الطلبات حسب الإيميل
    const customerOrders = data.filter(order => order.billing.email === customerEmail);

    if (customerOrders.length === 0) {
        console.log("❌ لا يوجد طلبات لهذا العميل:", customerEmail);
        return;
    }

    console.log("=== CUSTOMER ORDERS ===", customerOrders);

    // بيانات العميل من أول طلب
    const customerData = customerOrders[0].billing;

    console.log("=== CUSTOMER DATA ===");
    console.log({
        name: `${customerData.first_name} ${customerData.last_name}`,
        email: customerData.email,
        phone: customerData.phone,
        address: customerData.address_1,
        city: customerData.city,
        country: customerData.country
    });
})
.catch(error => {
    console.error("Error fetching orders:", error);
});


function cId () {
    
const consumer_key = 'ck_2e5a65a82af6bcc2ba23c93c79ee848326a31f76';
const consumer_secret = 'cs_07562a6ad0926374f19bf2f6e9484205bf67ec08';
const storeUrl = 'https://darkviolet-antelope-523488.hostingersite.com';

const token = btoa(`${consumer_key}:${consumer_secret}`);

const userId = 22;

fetch(`${storeUrl}/wp-json/custom/v1/customer-meta/${userId}`, {
    headers: {
        "Authorization": `Basic ${token}`
    }
})
.then(res => res.json())
.then(data => {
    console.log("=== USER META ===");
    console.log(data);

    console.log("Specific:", data["_billing_saved_address"]);
})
.catch(err => console.error(err));

}
cId()
</script>
</body>
</html>